{% extends "../../../partials/layout.njk" %}
{% from "../../../partials/navBar.njk" import navBar with context %}
{% from "../../../partials/breadCrumb.njk" import breadCrumb %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "moj/components/pagination/macro.njk" import mojPagination %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "../../../macros/error-summary/macro.njk" import errorSummary %}

{% set title = jobTitle %}

{% block beforeContent %}
    {{ govukBackLink({ text: "Back", href: backLocation, attributes: { "aria-label" : "Back to "+ prisoner.firstName + " " + prisoner.lastName +"'s job list"} }) }}
{% endblock %}

{% block content %}
    {{ errorSummary(errors) }}

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
          <h1 class="govuk-heading-l govuk-!-margin-bottom-2">
            {{ job.jobTitle }}
          </h1>
          <p class="govuk-body govuk-!-margin-bottom-2">Employer: {{ job.employerName }}</p>
          <p class="govuk-body govuk-!-margin-bottom-5"><a class="govuk-link" href="#">Print</a></p>

          <h2 class="govuk-heading-s">
            Key information
          </h2>
          <ul class="govuk-list">
            <li>
              Closing date: {{ job.closingDate }}
            </li>
            <li>
              Location: {{ job.city }}, {{ job.postcode }}
            </li>
            <li>
              Hours: {{ job.workPattern }}, {{ job.workPatternName }}
            </li>
            <li>
              Salary: {{ job.salary }}, {{ job.salaryPeriod }}
            </li>
            <li>
              Offence exclusions: 
              {% if job.offenceExclusions.length %}
                {% for offence in job.offenceExclusions %}
                  <div>{{ offence }}</div>
                {% endfor %}
              {% else %}
                None
              {% endif %}
            </li>
          </ul>

          <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

          <h2 class="govuk-heading-s">
            Essential criteria
          </h2>

          <ul class="govuk-list govuk-list--bullet">
            {% for criteria in job.essentialCriteria %}
              <li>{{ criteria }}</li>
            {% endfor %}
          </ul>

          {% if job.desirableCriteria.length %}
            <h2 class="govuk-heading-s">
              Desirable criteria
            </h2>

            <ul class="govuk-list govuk-list--bullet">
              {% for criteria in job.desirableCriteria %}
                <li>{{ criteria }}</li>
              {% endfor %}
            </ul>
          {% endif %}

          <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

          <h2 class="govuk-heading-s">
            Job description
          </h2>
          <p class="govuk-body">
            {{ job.jobDescription | striptags(true) | escape | nl2br }}
          </p>
          

          <div class="govuk-button-grou govuk-!-margin-top-8">
            <button type="submit" class="govuk-button" data-module="govuk-button">
              Manage application
            </button>
            <button type="submit" class="govuk-button govuk-button--secondary" data-module="govuk-button">
              Archive job
            </button>
          </div>

        </div>

        <div class="govuk-grid-column-one-third">
          <section class="app-summary-card govuk-!-margin-bottom-6">
            <header class="app-summary-card__header">
              <h2 class="app-summary-card__title">
                {{ prisoner.firstName + " " + prisoner.lastName }} matching summary
              </h2>
            </header>

            <div class="app-summary-card__body">

              <h3 class="govuk-heading-s govuk-!-margin-bottom-2">
                Type of work:
              </h3>
              <p class="govuk-body">{{ contentLookup.fields.typeOfWork[job.typeOfWork] }}</p>
              <h3 class="govuk-heading-s govuk-!-margin-bottom-2">
                Matches prisoner interests?
              </h3>
              <p class="govuk-body">Yes</p>

              <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

              <h3 class="govuk-heading-s govuk-!-margin-bottom-2">
                Job location
              </h3>
              <p class="govuk-body">{{ job.city }}, {{ job.postcode }}</p>
              {% if releaseArea %}
                <div class="timeline">
                  <ul>
                    <li>
                      <p class="govuk-!-padding-top-4 govuk-!-padding-bottom-1">{{ job.distance }} miles from release area: <br>{{ releaseArea.city }}, {{ releaseArea.postcode }}</p>
                    </li>
                    <li>
                    </li>
                  </ul>
               </div>
              {% endif %}
            </div>
          </section>
        </div>

     </div>
{% endblock %}



